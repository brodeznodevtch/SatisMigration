# PHP
# Test and package your PHP project.
# Add steps that run tests, save build artifacts, deploy, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/php

trigger:
- main

pool:
  vmImage: ubuntu-latest

variables:
  phpVersion: 7.4

steps:
- task: SSH@0
  inputs:
    sshEndpoint: 'AWS_S1'
    runOptions: 'commands'
    commands: |
      cd /var/www/devtech.satiserp.app; 
      unzip vendor.zip;
      sudo mkdir storage;
      cd storage;
      sudo mkdir framework;
      cd framework;
      sudo mkdir views;
      sudo mkdir cache;
      sudo mkdir sessions;
      cd /var/www/devtech.satiserp.app; 
      sudo composer dump-autoload;
      sudo php artisan clear-compiled;
      sudo php artisan config:cache;
    readyTimeout: '20000'